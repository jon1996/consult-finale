# Enable mod_rewrite
RewriteEngine On

# If the request corresponds to an existing file or directory, serve it directly
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Internally rewrite extensionless URLs to .php files if they exist
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^([^/]+)/?$ $1.php [L,QSA]

# Optionally redirect direct access to .php URLs to extensionless (canonical)
RewriteCond %{THE_REQUEST} \s/([^?]*?)\.php[\s?]
RewriteRule ^ /%1 [R=301,L]
